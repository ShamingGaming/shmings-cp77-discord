name: Update Discord Classnames
on:
  schedule:
    - cron: '0 0 * * *' # T채glich um Mitternacht
  workflow_dispatch: # Manuell startbar

jobs:
  update:
    runs-on: ubuntu-latest
    permissions:
      contents: write # WICHTIG: Gibt dem Bot schreibrechte
      
    steps:
      - uses: actions/checkout@v3
      
      # Schritt 1: Wir installieren eine Umgebung, die Code ausf체hren kann
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      # Schritt 2: Wir f체hren das Tool direkt aus (ohne GitHub Action Zwischenh채ndler)
      # "npx" holt das Tool @vanyle/discord-update-classnames direkt aus dem Netz
      - name: Run Update Script
        run: npx -y @vanyle/discord-update-classnames cp77.css cp77_2.css

      # Schritt 3: Speichern
      - name: Commit changes
        uses: stefanzweifel/git-auto-commit-action@v4
        with:
          commit_message: "Discord Update erkannt - Skins repariert"
